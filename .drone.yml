kind: pipeline
name: lang

steps:
  - name: prepare
    image: node:lts
    commands:
      - npm install
      - cd sdk
      - npm install
  - name: test
    image: node:lts
    commands:
      - npm run test:sunit
---
kind: pipeline
name: built-cli
steps:
  - name: prepare
    image: node:lts
    commands:
      - npm install
      - cd sdk
      - npm install
      - cd ..
      - cd cli
      - npm install
  - name: build
    image: node:lts
    commands:
      - npm run build:cli
  - name: test
    image: node:lts
    commands:
      - npm run test:e2e
---
kind: pipeline
name: installable-cli
steps:
  - name: prepare
    image: node:lts
    commands:
      - cd cli
      - npm install
  - name: install-and-test
    image: node:lts
    environment:
      AMBER_CLI: amber
    commands:
      - npm install -g @ambers/cli
      - npm run test:e2e
